CREATE TABLE USUARIO(
ID_USUARIO INTEGER GENERATED BY DEFAULT AS IDENTITY,
NOMBRE VARCHAR(120),
APELLIDOS VARCHAR(160),
NOMBRE_USUARIO VARCHAR(120),
CONTRASENA VARCHAR(255),
CONSTRAINT PK_USUARIO PRIMARY KEY (ID_USUARIO)
);

CREATE TABLE ROL(
ID_ROL INTEGER GENERATED BY DEFAULT AS IDENTITY,
NOMBRE VARCHAR(80),
CONSTRAINT PK_ROL PRIMARY KEY (ID_ROL)
);

CREATE TABLE PERMISO(
ID_PERMISO INTEGER GENERATED BY DEFAULT AS IDENTITY,
NOMBRE VARCHAR(120),
CONSTRAINT PK_PERMISO PRIMARY KEY (ID_PERMISO)
);

CREATE TABLE USUARIO_ROL(
ID_USUARIO INTEGER NOT NULL,
ID_ROL INTEGER NOT NULL,
CONSTRAINT PK_USUARIO_ROL PRIMARY KEY (ID_USUARIO, ID_ROL),
CONSTRAINT FK_USUARIO_ROL_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),
CONSTRAINT FK_USUARIO_ROL_ROL FOREIGN KEY (ID_ROL) REFERENCES ROL(ID_ROL)
);

CREATE TABLE ROL_PERMISO(
ID_ROL INTEGER NOT NULL,
ID_PERMISO INTEGER NOT NULL,
CONSTRAINT PK_ROL_PERMISO PRIMARY KEY (ID_ROL, ID_PERMISO),
CONSTRAINT FK_ROL_PERMISO_ROL FOREIGN KEY (ID_ROL) REFERENCES ROL(ID_ROL),
CONSTRAINT FK_ROL_PERMISO_PERMISO FOREIGN KEY (ID_PERMISO) REFERENCES PERMISO(ID_PERMISO)
);