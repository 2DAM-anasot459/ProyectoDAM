CREATE TABLE ACTIVOS_SOFTWARE(
ID_SOFTWARE INTEGER GENERATED BY DEFAULT AS IDENTITY,
ID_ACTIVO INTEGER NOT NULL,
SO_NOMBRE VARCHAR(150),
SO_VERSION VARCHAR(100),
SO_ULTIMO_ARRANQUE DATETIME,
SI_NOMBRE VARCHAR(200),
SI_RUTA VARCHAR(400),
USUARIO_NOMBRE VARCHAR(150),
SEGURIDAD_ESTADO_WINDOWS_DEFENDER VARCHAR(120),
CONSTRAINT PK_ACTIVOS_SOFTWARE PRIMARY KEY (ID_SOFTWARE),
CONSTRAINT FK_ACTIVOS_SOFTWARE_ACTIVOS FOREIGN KEY (ID_ACTIVO)
    REFERENCES ACTIVOS(ID_ACTIVO)
);

CREATE TABLE ACTIVOS_HARDWARE(
ID_HARDWARE INTEGER GENERATED BY DEFAULT AS IDENTITY,
ID_ACTIVO INTEGER NOT NULL,
CPU_NOMBRE VARCHAR(200),
CPU_NUMERO_NUCLEOS INTEGER,
CPU_FABRICANTE VARCHAR(120),
RAM_CAPACIDAD_TOTAL INTEGER,
RAM_NUMERO_MODULOS INTEGER,
RAM_TIPO_MODULOS VARCHAR(80),
RAM_NUMERO_RANURAS INTEGER,
PLACA_MODELO VARCHAR(150),
PLACA_VERSION VARCHAR(100),
DISCO_DURO_MODELO VARCHAR(150),
DISCO_DURO_CAPACIDAD INTEGER,
DISCO_DUROS_ESPACIO_LIBRE INTEGER,
RED_TIPO VARCHAR(80),
CONSTRAINT PK_ACTIVOS_HARDWARE PRIMARY KEY (ID_HARDWARE),
CONSTRAINT FK_ACTIVOS_HARDWARE_ACTIVOS FOREIGN KEY (ID_ACTIVO)
    REFERENCES ACTIVOS(ID_ACTIVO)
);

CREATE TABLE ACTIVOS(
ID_ACTIVO INTEGER GENERATED BY DEFAULT AS IDENTITY,
NOMBRE_EQUIPO VARCHAR(150),
MODELO_EQUIPO VARCHAR(150),
USUARIO_ACTUAL VARCHAR(150),
RED_IP VARCHAR(64),
RED_ESTADO VARCHAR(60),
SO_NOMBRE VARCHAR(150),
SO_VERSION VARCHAR(100),
ID_LOCALIZACION INTEGER,
CONSTRAINT PK_ACTIVOS PRIMARY KEY (ID_ACTIVO),
CONSTRAINT FK_ACTIVOS_LOCALIZACION FOREIGN KEY (ID_LOCALIZACION)
    REFERENCES LOCALIZACION(ID_LOCALIZACION)
);

CREATE TABLE INCIDENCIA(
NUMERO_INCIDENCIA INTEGER GENERATED BY DEFAULT AS IDENTITY,
TITULO VARCHAR(200),
DESCRIPCION TEXT,
FECHA_CREACION DATETIME,
FECHA_FINALIZACION DATETIME,
ID_ACTIVO INTEGER,
ID_ESTADO INTEGER,
CONSTRAINT PK_INCIDENCIA PRIMARY KEY (NUMERO_INCIDENCIA),
CONSTRAINT FK_INCIDENCIA_ACTIVOS FOREIGN KEY (ID_ACTIVO)
    REFERENCES ACTIVOS(ID_ACTIVO),
CONSTRAINT FK_INCIDENCIA_ESTADO FOREIGN KEY (ID_ESTADO)
    REFERENCES ESTADO(ID_ESTADO)
);

CREATE TABLE ESTADO(
ID_ESTADO INTEGER GENERATED BY DEFAULT AS IDENTITY,
TIPO VARCHAR(80),
DESCRIPCION VARCHAR(255),
FECHA_INICIO DATETIME,
FECHA_MODIFICACION DATETIME,
FECHA_FIN DATETIME,
CONSTRAINT PK_ESTADO PRIMARY KEY (ID_ESTADO)
);

CREATE TABLE LOCALIZACION(
ID_LOCALIZACION INTEGER GENERATED BY DEFAULT AS IDENTITY,
NOMBRE VARCHAR(150),
LATITUD DECIMAL(10,7),
LONGITUD DECIMAL(10,7),
CONSTRAINT PK_LOCALIZACION PRIMARY KEY (ID_LOCALIZACION)
);

CREATE TABLE INCIDENCIA_LOCALIZACION(
ID_INC_LOC INTEGER GENERATED BY DEFAULT AS IDENTITY,
NUMERO_INCIDENCIA INTEGER,
ID_LOCALIZACION INTEGER,
CONSTRAINT PK_INCIDENCIA_LOCALIZACION PRIMARY KEY (ID_INC_LOC),
CONSTRAINT FK_INCIDENCIA_LOCALIZACION_INCIDENCIA FOREIGN KEY (NUMERO_INCIDENCIA)
    REFERENCES INCIDENCIA(NUMERO_INCIDENCIA),
CONSTRAINT FK_INCIDENCIA_LOCALIZACION_LOCALIZACION FOREIGN KEY (ID_LOCALIZACION)
    REFERENCES LOCALIZACION(ID_LOCALIZACION)
);